# 1panel-site-log
## 1panel网站监控和防火墙日志开源实现


### 1. 为什么要做？
1panel是一个很好的管理网站的工具，因为专业版才有完整的waf和网站监控功能，但是专业版的价格对个人的钱包来说还不是很友好的（这是我的问题），所以想做一个开源的替代方案。目前是简单的实现waf和网站监控日志的展示。

### 2. 为什么用PHP?
因为我的站点大部分都是PHP语言的。开发起来快，方便集成（我不是专业的PHP开发者）。

### 2. 效果图
废话不多说，直接上图。目前的实现很简单很暴力（简单到没有详情页，直接在主页里展示），但是基本的功能已经够用了。

waf日志：
![alt text](images/waflog.png)
攻击日志：
![alt text](images/wafdetail.png)
网站日志：
![alt text](images/sitelog.png)

### 3. 功能介绍

核心功能

	•	waf日志展示
	•	攻击日志展示
	•	网站日志

版本 1.0.0

	•	目前只实现了waf日志和网站监控日志的展示，但是没有详情页。

### 4. 使用方法

1. 手动安装
    1. 对你的数据库文件目录进行授权，否则无法读取到数据库,数据库文件目录通常在'/opt/1panel/apps/openresty/openresty/1pwaf/data'下，如果是自定义路径你更换路径。授权命令：```chmod 777 -R db/```
	1.	将项目代码上传到支持 PHP 的 Web 服务器（如 Nginx 或 Apache）。
	2.	确保 SQLite 数据库文件路径正确（需要修改每个PHP文件中的数据库文件地址配置，将地址修改为你系统环境中的数据库文件路径,每个PHP文件各一处，都在头部）。如下图所示）。
    ![alt text](images/code1.png)
    ![alt text](images/code2.png)
	3.	确保 php-sqlite3 扩展已启用。

2. Docker部署
    直接将项目拷贝下来使用1panel的php镜像运行即可，注意需要修改数据库文件路径。

### 5. 技术栈
	•	后端：
	•	PHP 7+（用于处理请求和查询数据）。
	•	SQLite 3（作为日志存储数据库）。
	•	前端：
	•	HTML5 和 CSS3（页面布局和样式）。
	•	Bootstrap 5（快速构建响应式页面）。

### 6. 缺陷
    •	目前只实现了基础的日志展示，没有详情页。
    •	前端样式有待优化，做了移动端适配，效果不好。
